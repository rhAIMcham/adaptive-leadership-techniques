<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta lang="en">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
<title>Pressure Triggers Quiz</title>
<style>
    .checkContainer {
        display: flex;
        align-items: center;
        margin: 15px 0;
    }
    
    :root {
        --AIMblue: #4353A3;
        --darkBlue: #38416D;
        --teal: #5DC8B9;
        --cream: #F1EEDE;
        --grey: #e7e9ec;
        --rust: #AF4510;
        --navy: #12195C;
        --white: #ffffff;
        --lightBlue: #AEBAE4;
    }

    body {
        font-family: "IBM Plex Sans", sans-serif;
        margin: 0;
        padding: 20px;
    }

    .quiz-container {
        max-width: 800px;
        margin: 0 auto;
        background-color: #F1EEDE30;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }

    .intro-section {
        padding: 30px;
        background-color: var(--cream);
        text-align: center;
    }

    .intro-section h1 {
        color: var(--AIMblue);
        margin-bottom: 15px;
    }

    .intro-section p {
        line-height: 1.6;
        color: var(--darkBlue);
    }

    .slide-container {
        padding: 30px;
        padding-top: 15px;
    }

    .slide {
        display: none;
        width: 100%;
    }

    .slide.active {
        display: block;
    }

    .slide h3 {
        color: var(--AIMblue);
        margin-bottom: 25px;
        text-align: center;
    }

    fieldset {
        border: none;
        margin: 0;
        padding: 0;
    }
    
    .checkContainer {
        display: flex;
        align-items: flex-start;
        margin: 20px 0;
        padding: 15px;
        background-color: var(--grey);
        border-radius: 8px;
    }

    .instructions {
        display: flex;
        padding-left: 30px;
    }

    .checkContainer p {
        margin: 0;
        margin-right: 15px;
        flex-grow: 1;
        font-size: 16px;
        line-height: 1.4;
    }

    input[type="radio"] {
        margin: 0;
        transform: scale(1.2);
        cursor: pointer;
    }

    .navigation {
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: 20px 30px;
        background-color: var(--grey);
    }

    .nav-buttons {
        display: flex;
        gap: 10px;
    }

    .nav-button {
        width: 40px;
        height: 40px;
        border: 2px solid var(--AIMblue);
        background-color: var(--white);
        color: var(--AIMblue);
        border-radius: 50%;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
    }

    .nav-button:hover {
        background-color: var(--lightBlue);
    }

    .nav-button.active {
        background-color: var(--AIMblue);
        color: var(--white);
    }

    .arrow-button {
        padding: 10px 20px;
        background-color: #5DC8B990;
        color: black;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease;
    }

    .arrow-button:hover:not(:disabled) {
        background-color: var(--darkBlue);
        color: white;
    }

    .arrow-button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }

    .submit-button {
        padding: 15px 30px;
        background-color: var(--teal);
        color: var(--white);
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 18px;
        font-weight: bold;
        margin: 20px auto;
        display: none;
    }

    .submit-button:hover {
        background-color: #4db5a5;
    }

    .submit-button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
        opacity: 0.6;
    }

    #results {
        max-width: 800px;
        margin: 15px auto;
        background-color: var(--cream);
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        display: none;
        padding: 30px;
    }

    #results h2 {
        color: var(--AIMblue);
        text-align: center;
        margin-bottom: 20px;
    }

    #results h3 {
        color: var(--darkBlue);
        margin-top: 25px;
        margin-bottom: 10px;
    }

    #results p, #results ul {
        line-height: 1.6;
        color: var(--darkBlue);
    }

    #results ul {
        padding-left: 20px;
    }

    #results li {
        margin-bottom: 8px;
    }

    .chart-container {
        max-width: 400px;
        margin: 30px auto;
        padding: 20px;
    }

    .progress-bar {
        height: 6px;
        background-color: var(--grey);
        margin: 0 30px 20px;
        border-radius: 3px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background-color: var(--teal);
        transition: width 0.3s ease;
        width: 10%;
    }

    @media screen and (max-width: 600px) {
        .quiz-container {
            margin: 0;
        }

        .slide-container,
        .navigation,
        .instructions,
        .intro-section {
            padding: 15px;
        }

        .nav-buttons {
            gap: 5px;
        }

        .nav-button {
            width: 35px;
            height: 35px;
            font-size: 14px;
        }

        .arrow-button {
            padding: 8px 12px;
            font-size: 14px;
        }
    }
</style>
</head>
<body>
    <div class="quiz-container">
        <!-- <div class="intro-section">
            <h1>Pressure Triggers Quiz</h1>
            <p>To begin to understand which of these four common triggers might affect you most under pressure, take this quiz. Each question has four options. Choose the option that best reflects what you most often do under pressure (not what you wish you did).</p>
        </div> -->
        
        <nav class="navigation" aria-label="Quiz navigation">
            <div class="nav-buttons" role="tablist">
                <button class="nav-button active" onclick="goToSlide(1)" role="tab" aria-selected="true" aria-controls="slide-1" id="tab-1" aria-label="Question 1">1</button>
                <button class="nav-button" onclick="goToSlide(2)" role="tab" aria-selected="false" aria-controls="slide-2" id="tab-2" aria-label="Question 2">2</button>
                <button class="nav-button" onclick="goToSlide(3)" role="tab" aria-selected="false" aria-controls="slide-3" id="tab-3" aria-label="Question 3">3</button>
                <button class="nav-button" onclick="goToSlide(4)" role="tab" aria-selected="false" aria-controls="slide-4" id="tab-4" aria-label="Question 4">4</button>
                <button class="nav-button" onclick="goToSlide(5)" role="tab" aria-selected="false" aria-controls="slide-5" id="tab-5" aria-label="Question 5">5</button>
                <button class="nav-button" onclick="goToSlide(6)" role="tab" aria-selected="false" aria-controls="slide-6" id="tab-6" aria-label="Question 6">6</button>
                <button class="nav-button" onclick="goToSlide(7)" role="tab" aria-selected="false" aria-controls="slide-7" id="tab-7" aria-label="Question 7">7</button>
                <button class="nav-button" onclick="goToSlide(8)" role="tab" aria-selected="false" aria-controls="slide-8" id="tab-8" aria-label="Question 8">8</button>
                <button class="nav-button" onclick="goToSlide(9)" role="tab" aria-selected="false" aria-controls="slide-9" id="tab-9" aria-label="Question 9">9</button>
                <button class="nav-button" onclick="goToSlide(10)" role="tab" aria-selected="false" aria-controls="slide-10" id="tab-10" aria-label="Question 10">10</button>
            </div>
        </nav>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" role="progressbar"></div>
        </div>
        <form name="q1" onsubmit="return false" onchange="updateSubmitButton()">
            <div class="slide-container" id="slideContainer" role="region" aria-live="polite">
                <!-- Slide 1 -->
                <fieldset class="slide active" id="slide-1" role="tabpanel" aria-labelledby="tab-1">
                    <legend>
                        <h3>A project is going off track and you're getting questioned about progress. You're most likely to…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q1-a">Step in, assign tasks and tighten oversight.</label>
                        </p>
                        <input type="radio" id="q1-a" name="question1" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q1-b">Ask for more analysis to confirm what's really causing the issue.</label>
                        </p>
                        <input type="radio" id="q1-b" name="question1" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q1-c">Reassure everyone and avoid hard feedback to keep morale up.</label>
                        </p>
                        <input type="radio" id="q1-c" name="question1" value="c" autocomplete="off">
                    </div>
            
                    <div class="checkContainer">
                        <p>
                            <label for="q1-d">Push for immediate actions and rapid updates to regain momentum.</label>
                        </p>
                        <input type="radio" id="q1-d" name="question1" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 2 -->
                <fieldset class="slide" id="slide-2" role="tabpanel" aria-labelledby="tab-2">
                    <legend>
                        <h3>You're asked a tough question in a meeting and you don't know the answer. You…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q2-a">Redirect to what you can control - process, roles and next actions.</label>
                        </p>
                        <input type="radio" id="q2-a" name="question2" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q2-b">Feel uncomfortable until you can get the facts and become certain.</label>
                        </p>
                        <input type="radio" id="q2-b" name="question2" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q2-c">Try to respond in a way that keeps others confident in you.</label>
                        </p>
                        <input type="radio" id="q2-c" name="question2" value="c" autocomplete="off">
                    </div>

                    <div class="checkContainer">
                        <p>
                            <label for="q2-d">Answer quickly so the conversation keeps moving.</label>
                        </p>
                        <input type="radio" id="q2-d" name="question2" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 3 -->
                <fieldset class="slide" id="slide-3" role="tabpanel" aria-labelledby="tab-3">
                    <legend>
                        <h3>Someone challenges your decision publicly. Your first impulse is to…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q3-a">Take charge and reassert expectations.</label>
                        </p>
                        <input type="radio" id="q3-a" name="question3" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q3-b">Justify your logic and look for more evidence to prove it.</label>
                        </p>
                        <input type="radio" id="q3-b" name="question3" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q3-c">Smooth it over so the relationship isn't damaged.</label>
                        </p>
                        <input type="radio" id="q3-c" name="question3" value="c" autocomplete="off">
                    </div>

                    <div class="checkContainer">
                        <p>
                            <label for="q3-d">Move to a fast decision so it doesn't drag on.</label>
                        </p>
                        <input type="radio" id="q3-d" name="question3" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 4 -->
                <fieldset class="slide" id="slide-4" role="tabpanel" aria-labelledby="tab-4">
                    <legend>
                        <h3>You're overloaded and a teammate makes a mistake. You tend to…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q4-a">Fix it yourself to ensure quality.</label>
                        </p>
                        <input type="radio" id="q4-a" name="question4" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q4-b">Review what happened in detail so it doesn't happen again.</label>
                        </p>
                        <input type="radio" id="q4-b" name="question4" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q4-c">Downplay it to avoid discouraging them.</label>
                        </p>
                        <input type="radio" id="q4-c" name="question4" value="c" autocomplete="off">
                    </div>

                    <div class="checkContainer">
                        <p>
                            <label for="q4-d">Correct it quickly and push forward to stay on schedule.</label>
                        </p>
                        <input type="radio" id="q4-d" name="question4" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 5 -->
                <fieldset class="slide" id="slide-5" role="tabpanel" aria-labelledby="tab-5">
                    <legend>
                        <h3>An ambiguous change request comes in ("make it better"). You're most likely to…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q5-a">Define the process, structure the work, and control the scope tightly.</label>
                        </p>
                        <input type="radio" id="q5-a" name="question5" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q5-b">Ask for clearer requirements and data before proceeding.</label>
                        </p>
                        <input type="radio" id="q5-b" name="question5" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q5-c">Ask what will make stakeholders happiest and aim to satisfy them.</label>
                        </p>
                        <input type="radio" id="q5-c" name="question5" value="c" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q5-d">Start immediately with quick changes and adjust later.</label>
                        </p>
                        <input type="radio" id="q5-d" name="question5" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 6 -->
                <fieldset class="slide" id="slide-6" role="tabpanel" aria-labelledby="tab-6">
                    <legend>
                        <h3>Two stakeholders want opposite things and both are pressuring you. You…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q6-a">Decide who owns the call and enforce a decision pathway.</label>
                        </p>
                        <input type="radio" id="q6-a" name="question6" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q6-b">Seek more information so you can make the "right" choice.</label>
                        </p>
                        <input type="radio" id="q6-b" name="question6" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q6-c">Try to accommodate both so no-one feels ignored.</label>
                        </p>
                        <input type="radio" id="q6-c" name="question6" value="c" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q6-d">Choose the fastest workable option to relieve the pressure.</label>
                        </p>
                        <input type="radio" id="q6-d" name="question6" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 7 -->
                <fieldset class="slide" id="slide-7" role="tabpanel" aria-labelledby="tab-7">
                    <legend>
                        <h3>Your calendar is packed and interruptions keep happening. You respond by…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q7-a">Setting stricter boundaries and controlling access/time.</label>
                        </p>
                        <input type="radio" id="q7-a" name="question7" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q7-b">Trying to plan perfectly so nothing is uncertain.</label>
                        </p>
                        <input type="radio" id="q7-b" name="question7" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q7-c">Staying available so people don't feel unsupported.</label>
                        </p>
                        <input type="radio" id="q7-c" name="question7" value="c" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q7-d">Multitasking and rushing to clear everything quickly.</label>
                        </p>
                        <input type="radio" id="q7-d" name="question7" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 8 -->
                <fieldset class="slide" id="slide-8" role="tabpanel" aria-labelledby="tab-8">
                    <legend>
                        <h3>You receive vague critical feedback ("This isn't working"). You're most likely to…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q8-a">Tighten standards and increase checkpoints.</label>
                        </p>
                        <input type="radio" id="q8-a" name="question8" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q8-b">Ask for specifics and evidence so you can understand precisely.</label>
                        </p>
                        <input type="radio" id="q8-b" name="question8" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q8-c">Worry about how you're perceived and try to repair the relationship fast.</label>
                        </p>
                        <input type="radio" id="q8-c" name="question8" value="c" autocomplete="off">
                    </div>

                    <div class="checkContainer">
                        <p>
                            <label for="q8-d">Jump into immediate fixes to demonstrate responsiveness.</label>
                        </p>
                        <input type="radio" id="q8-d" name="question8" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 9 -->
                <fieldset class="slide" id="slide-9" role="tabpanel" aria-labelledby="tab-9">
                    <legend>
                        <h3>A decision needs to be made with incomplete information. You…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q9-a">Create rules/guardrails and control risk through structure.</label>
                        </p>
                        <input type="radio" id="q9-a" name="question9" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q9-b">Delay until you have enough certainty to feel confident.</label>
                        </p>
                        <input type="radio" id="q9-b" name="question9" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q9-c">Check how others will react and shape the decision accordingly.</label>
                        </p>
                        <input type="radio" id="q9-c" name="question9" value="c" autocomplete="off">
                    </div>

                    <div class="checkContainer">
                        <p>
                            <label for="q9-d">Decide fast and trust you'll figure it out as you go.</label>
                        </p>
                        <input type="radio" id="q9-d" name="question9" value="d" autocomplete="off">
                    </div>
                </fieldset>

                <!-- Slide 10 -->
                <fieldset class="slide" id="slide-10" role="tabpanel" aria-labelledby="tab-10">
                    <legend>
                        <h3>When you feel stress building during the day, your default is to…</h3>
                    </legend>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q10-a">Clamp down on tasks and manage details more tightly.</label>
                        </p>
                        <input type="radio" id="q10-a" name="question10" value="a" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q10-b">Think harder, research more, and try to remove ambiguity.</label>
                        </p>
                        <input type="radio" id="q10-b" name="question10" value="b" autocomplete="off">
                    </div>
                    
                    <div class="checkContainer">
                        <p>
                            <label for="q10-c">Seek reassurance, harmony, or approval to feel steady again.</label>
                        </p>
                        <input type="radio" id="q10-c" name="question10" value="c" autocomplete="off">
                    </div>

                    <div class="checkContainer">
                        <p>
                            <label for="q10-d">Speed up and push through to get it over with.</label>
                        </p>
                        <input type="radio" id="q10-d" name="question10" value="d" autocomplete="off">
                    </div>
                    <button class="submit-button" id="submitButton" onclick="formOne()" aria-label="Submit quiz and view results">
                        Submit & View Results
                    </button>
                </fieldset>
            </div>
        </form>

        <nav class="navigation" aria-label="Quiz navigation">
            <button class="arrow-button" id="prevBtn" onclick="previousSlide()" aria-label="Previous question">
                ← Previous
            </button>
            
            <button class="arrow-button" id="nextBtn" onclick="nextSlide()" aria-label="Next question">
                Next →
            </button>
        </nav>
    </div>

    <!-- Results Display -->
    <div id="results" role="region" aria-live="polite" aria-label="Quiz results"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let currentSlide = 1;
const totalSlides = 10;

function goToSlide(slideNumber) {
    const slides = document.querySelectorAll('.slide');
    slides.forEach(slide => slide.classList.remove('active'));
    
    document.getElementById(`slide-${slideNumber}`).classList.add('active');
    
    currentSlide = slideNumber;
    updateButtons();
    updateArrowButtons();
    updateProgressBar();
    updateSubmitButton();
}

function nextSlide() {
    if (currentSlide < totalSlides) {
        goToSlide(currentSlide + 1);
    }
}

function previousSlide() {
    if (currentSlide > 1) {
        goToSlide(currentSlide - 1);
    }
}

function updateButtons() {
    const buttons = document.querySelectorAll('.nav-button');
    buttons.forEach((btn, index) => {
        btn.classList.remove('active');
        btn.setAttribute('aria-selected', 'false');
        if (index === currentSlide - 1) {
            btn.classList.add('active');
            btn.setAttribute('aria-selected', 'true');
        }
    });
}

function updateArrowButtons() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    
    prevBtn.disabled = currentSlide === 1;
    nextBtn.disabled = currentSlide === totalSlides;
}

function updateProgressBar() {
    const progressFill = document.getElementById('progressFill');
    const progress = (currentSlide / totalSlides) * 100;
    progressFill.style.width = `${progress}%`;
}

function updateSubmitButton() {
    const submitButton = document.getElementById('submitButton');
    if (currentSlide === totalSlides) {
        submitButton.style.display = 'block';
        
        // Check if all questions are answered
        const form = document.forms['q1'];
        let answeredCount = 0;
        
        for (let i = 1; i <= 10; i++) {
            const question = form.elements[`question${i}`];
            if (question && question.value) {
                answeredCount++;
            }
        }
        
        // Enable button only if all 10 questions are answered
        submitButton.disabled = answeredCount !== 10;
    } else {
        submitButton.style.display = 'none';
    }
}

function formOne() {
    const form = document.forms['q1'];
    let aCount = 0;
    let bCount = 0;
    let cCount = 0;
    let dCount = 0;
    
    for (let i = 1; i <= 10; i++) {
        const question = form.elements[`question${i}`];
        if (question && question.value) {
            if (question.value === 'a') aCount++;
            else if (question.value === 'b') bCount++;
            else if (question.value === 'c') cCount++;
            else if (question.value === 'd') dCount++;
        }
    }
    
    // Don't submit if not all questions are answered
    const totalAnswered = aCount + bCount + cCount + dCount;
    if (totalAnswered !== 10) {
        return false;
    }
    
    const results = document.getElementById("results");
    results.style.display = "block";
    
    // Trigger descriptions
    const triggers = {
        'a': 'Control',
        'b': 'Certainty',
        'c': 'Approval',
        'd': 'Urgency'
    };
    
    // Find highest and second highest
    const counts = [
        { trigger: 'a', count: aCount },
        { trigger: 'b', count: bCount },
        { trigger: 'c', count: cCount },
        { trigger: 'd', count: dCount }
    ].sort((x, y) => y.count - x.count);
    
    const maxCount = counts[0].count;
    const primaryTriggers = counts.filter(item => item.count === maxCount);
    const secondaryCount = counts.find(item => item.count < maxCount)?.count || 0;
    const secondaryTriggers = counts.filter(item => item.count === secondaryCount && item.count > 0);
    
    // Build results HTML
    let resultsHTML = '<h2>Your pressure triggers</h2>';
    
    // Add chart
    resultsHTML += '<div class="chart-container"><canvas id="resultsChart"></canvas></div>';
    
    // Interpretation
    resultsHTML += '<h3>Interpreting your results</h3>';
    
    if (primaryTriggers.length > 1) {
        resultsHTML += '<p><strong>Primary triggers (tied):</strong> ';
        resultsHTML += primaryTriggers.map(t => `${triggers[t.trigger]} (${t.count})`).join(', ');
        resultsHTML += '</p>';
        resultsHTML += '<p>You likely switch patterns depending on context (e.g., urgency at work, approval in relationships).</p>';
    } else {
        resultsHTML += `<p><strong>Primary trigger:</strong> ${triggers[primaryTriggers[0].trigger]} trigger (${maxCount} responses)</p>`;
        resultsHTML += '<p>This is your dominant pattern under pressure.</p>';
        
        if (secondaryTriggers.length > 0 && secondaryCount > 0) {
            resultsHTML += `<p><strong>Secondary trigger:</strong> ${triggers[secondaryTriggers[0].trigger]} trigger (${secondaryCount} responses)</p>`;
            resultsHTML += '<p>This often shows up when you\'re tired or stakes are high.</p>';
        }
    }
    
    // Add scoring breakdown
    resultsHTML += '<h3>Your score breakdown</h3><ul>';
    resultsHTML += `<li><strong>Control trigger (A):</strong> ${aCount} responses</li>`;
    resultsHTML += `<li><strong>Certainty trigger (B):</strong> ${bCount} responses</li>`;
    resultsHTML += `<li><strong>Approval trigger (C):</strong> ${cCount} responses</li>`;
    resultsHTML += `<li><strong>Urgency trigger (D):</strong> ${dCount} responses</li>`;
    resultsHTML += '</ul>';
    
    results.innerHTML = resultsHTML;
    
    // Create chart after HTML is rendered
    setTimeout(() => {
        const ctx = document.getElementById('resultsChart').getContext('2d');
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Control', 'Certainty', 'Approval', 'Urgency'],
                datasets: [{
                    data: [aCount, bCount, cCount, dCount],
                    backgroundColor: [
                        '#4353A3',  // Control - AIM blue
                        '#5DC8B9',  // Certainty - teal
                        '#AEBAE4',  // Approval - light blue
                        '#AF4510'   // Urgency - rust
                    ],
                    borderWidth: 2,
                    borderColor: '#ffffff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            font: {
                                size: 14,
                                family: "'IBM Plex Sans', sans-serif"
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const value = context.parsed || 0;
                                const percentage = ((value / 10) * 100).toFixed(0);
                                return `${label}: ${value} (${percentage}%)`;
                            }
                        }
                    }
                }
            }
        });
    }, 100);
    
    results.scrollIntoView({ behavior: 'smooth' });
}

document.addEventListener('keydown', function(event) {
    if (event.target.tagName === 'INPUT') {
        // Prevent Enter key from submitting the form
        if (event.key === 'Enter') {
            event.preventDefault();
            return;
        }
        return;
    }
    
    if (event.key === 'ArrowLeft') {
        event.preventDefault();
        previousSlide();
    } else if (event.key === 'ArrowRight') {
        event.preventDefault();
        nextSlide();
    }
});

updateArrowButtons();
updateProgressBar();
updateSubmitButton();
</script>
</body>
</html